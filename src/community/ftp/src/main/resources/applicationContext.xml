<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<bean id="ftpConfigLoader" class="org.geoserver.ftp.FTPConfigLoader">
		<description>
			Loads and saves the FTP server configuration to the
			ftp.xml file in the GeoServer data directory
		</description>
		<constructor-arg ref="resourceLoader">
			<description>Used to find out the geoserver data directory where to
				store/load the ftp.xml config file</description>
		</constructor-arg>
		<constructor-arg ref="xstreamPersisterFactory"/>
	</bean>

	<bean id="ftpCallbackFinder" class="org.geoserver.ftp.FtpLetFinder">
		<constructor-arg ref="userDetailsService" index="0" />
	</bean>

	<bean id="gsFtpUserManager" class="org.geoserver.ftp.GSFTPUserManager"
		depends-on="geoServer">
		<constructor-arg ref="userDetailsService" index="0" />
		<constructor-arg ref="dataDirectory" index="1" />
	</bean>


	<bean id="ftpServerManager" class="org.geoserver.ftp.FTPServerManager">
		<constructor-arg ref="gsFtpUserManager" />
		<constructor-arg ref="ftpCallbackFinder" />
		<constructor-arg ref="ftpConfigLoader" />
	</bean>
</beans>
