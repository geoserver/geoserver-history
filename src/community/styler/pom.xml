<?xml version="1.0" encoding="ISO-8859-1"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.geoserver</groupId>
    <artifactId>extension</artifactId>
    <version>2.0-beta1</version>
  </parent>

  <groupId>org.geoserver</groupId>
  <artifactId>styler</artifactId>
  <packaging>jar</packaging>
  <name>GeoExt Styler</name>

  <build>
   <plugins>
    <plugin>
     <artifactId>maven-antrun-plugin</artifactId>
      <executions>
       <execution>
         <phase>install</phase>
         <configuration>
          <tasks>
            <exec executable="jsbuild" dir="app" failonerror="true">
             <arg line="-o"/>
             <arg line="${build.directory}"/>
             <arg line="build.cfg"/>
            </exec>
            <zip destfile="${build.directory}/styler-${project.version}.zip">
              <zipfileset dir="app/externals/ext" prefix="styler/externals/ext"> 
                <include name="ext-all.js"/>
                <include name="adapter/ext/**.js"/>
                <include name="resources/css/ext-all.css"/>
                <include name="resources/css/xtheme-gray.css"/>
                <include name="resources/images/**/*"/>
                <exclude name="**/.svn"/>
              </zipfileset>
              <zipfileset dir="app/externals/openlayers" prefix="styler/externals/openlayers">
                <include name="theme/default/**/*"/>
                <exclude name="**/.svn"/>
              </zipfileset>
              <zipfileset dir="app/externals/ux/" prefix="styler/externals/ux">
                <include name="colorpicker/**/*"/>
              </zipfileset>
              <zipfileset dir="app" prefix="styler">
                <include name="index.html"/>
                <include name="theme/**/*"/>
              </zipfileset>
              <zipfileset dir="${build.directory}" prefix="styler/script">
                <include name="*.js"/>
              </zipfileset>
            </zip>
          </tasks>
         </configuration>
         <goals>
          <goal>run</goal>
         </goals>
       </execution>
      </executions>
      <dependencies>
        <dependency>
          <groupId>org.apache.ant</groupId>
          <artifactId>ant</artifactId>
          <version>1.7.1</version>
        </dependency>
      </dependencies>
     </plugin>
   </plugins>
  </build>

</project>
