<?xml version="1.0" encoding="utf-8" standalone="no"?>
<MapbuilderConfig version="0.2.1" id="referenceTemplate" xmlns="http://mapbuilder.sourceforge.net/mapbuilder" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://mapbuilder.sourceforge.net/mapbuilder ../../lib/schemas/config.xsd">
	<!--
    Description: This configuration file determines what components from the
                 Mapbuilder library are to be included in a Main Mapbuilder web
                 page.
    Licence:     LGPL as per: http://www.gnu.org/copyleft/lesser.html 

    $Id$
  -->
	<!--
    All static images should be relative to this URL.
    This dir is relative the dir of the main html file. 
  -->
	<models>
		<Context id="mainMap">
			<defaultModelUrl>tasmania.xml</defaultModelUrl>
			<widgets>
				<MapPane id="mainMapWidget">
					<htmlTagId>mainMapPane</htmlTagId>
					<mapContainerId>mainMapContainer</mapContainerId>
				</MapPane>
				<Loading id="loading">
        </Loading>
				<AoiBoxWZ id="aoiBox2">
					<htmlTagId>mainMapPane</htmlTagId>
					<stylesheet>../../lib/widget/GmlRenderer.xsl</stylesheet>
					<mapContainerId>mainMapContainer</mapContainerId>
					<lineColor>#FF0000</lineColor>
					<lineWidth>1</lineWidth>
					<crossSize>15</crossSize>
				</AoiBoxWZ>
				<CursorTrack id="cursorTrack">
					<mouseHandler>mainMap</mouseHandler>
				</CursorTrack>
				<Legend id="legend">
        </Legend>
				<Widget id="version">
					<stylesheet>../../lib/widget/Version.xsl</stylesheet>
				</Widget>
			</widgets>
			<tools>
				<AoiMouseHandler id="mainAoi"/>
				<DragPanHandler id="mainDragPan">
					<enabled>false</enabled>
				</DragPanHandler>
			</tools>
		</Context>
		<Context id="locator">
			<defaultModelUrl>../data/context/locatorMap.xml</defaultModelUrl>
			<widgets>
				<MapPane id="locatorWidget">
					<htmlTagId>locatorMap</htmlTagId>
					<targetModel>mainMap</targetModel>
					<mapContainerId>locatorContainer</mapContainerId>
					<fixedWidth>180</fixedWidth>
				</MapPane>
				<AoiBoxWZ id="aoiBox3">
					<htmlTagId>locatorMap</htmlTagId>
					<stylesheet>../../lib/widget/GmlRenderer.xsl</stylesheet>
					<mapContainerId>locatorContainer</mapContainerId>
					<lineColor>#FF0000</lineColor>
					<lineWidth>1</lineWidth>
					<crossSize>15</crossSize>
				</AoiBoxWZ>
			</widgets>
			<tools>
				<AoiMouseHandler id="locatorAoi"/>
				<ZoomToAoi id="locatorZoomToAoi">
					<targetModel>mainMap</targetModel>
				</ZoomToAoi>
			</tools>
		</Context>
		<!-- use this with a WFS capabilities model -->
		<WfsCapabilities id="wfsCapTemplate">
			<defaultModelUrl>http://localhost:8080/geoserver/wfs?version=1.0.0&amp;service=WFS&amp;request=GetCapabilities</defaultModelUrl>
			<!-- this XPath selects FeatureType nodes from the capabilities doc -->
			<models>
				<FeatureTypeSchema id="featureTypeTemplate">
					<widgets>
						<!-- this widget would be used to create filter expressions on the various attributes -->
						<Widget id="attributeFilter">
							<htmlTagId>workspace</htmlTagId>
							<outputNodeId>workspaceCanvas</outputNodeId>
							<stylesheet>../../lib/widget/FilterAttributes.xsl</stylesheet>
						</Widget>
					</widgets>
				</FeatureTypeSchema>
				<FeatureCollection id="getFeatureTemplate">
					<method>get</method>
					<!-- this xpath should be used to select GEOMETRY nodes in Features and should be set at run-time
          because it's currently hard-coded to topp:tasmania_roads
          -->
					<widgets>
						<GmlRendererWZ id="testGmlRenderer">
							<htmlTagId>mainMapPane</htmlTagId>
							<targetModel>mainMap</targetModel>
							<mapContainerId>mainMapContainer</mapContainerId>
							<lineColor>#FF00FF</lineColor>
							<lineWidth>1</lineWidth>
							<pointDiameter>10</pointDiameter>
						</GmlRendererWZ>
						<FeatureList id="featureList">
							<htmlTagId>workspace</htmlTagId>
							<outputNodeId>workspaceCanvas</outputNodeId>
							<targetModel>transactionTemplate</targetModel>
						</FeatureList>
					</widgets>
					<namespace>xmlns:gml='http://www.opengis.net/gml' xmlns:wfs='http://www.opengis.net/wfs' xmlns:topp='http://www.openplans.org/topp'</namespace>
					<nodeSelectXpath>/wfs:FeatureCollection/gml:featureMember/topp:tasmania_roads/topp:the_geom</nodeSelectXpath>
				</FeatureCollection>
				<Transaction id="transactionTemplate">
					<method>post</method>
					<widgets>
						<TransactionResponse id="transactionResponse">
            </TransactionResponse>
					</widgets>
				</Transaction>
			</models>
			<widgets>
				<!-- this widget lists the feature types so that they can be loaded/edited -->
				<Widget id="featureTypes">
					<htmlTagId>workspace</htmlTagId>
					<outputNodeId>workspaceCanvas</outputNodeId>
					<stylesheet>../../lib/widget/SelectFeatureType.xsl</stylesheet>
					<toolId>wfsController</toolId>
				</Widget>
			</widgets>
			<tools>
				<WebServiceRequest id="wfsGetFeature">
					<targetModel>getFeatureTemplate</targetModel>
					<requestName>wfs:GetFeature</requestName>
					<maxFeatures>20</maxFeatures>
				</WebServiceRequest>
				<WebServiceRequest id="wfsDescribeFeature">
					<targetModel>featureTypeTemplate</targetModel>
					<requestName>wfs:DescribeFeatureType</requestName>
				</WebServiceRequest>
				<!-- this tool needs to be customized to apply the XSL to an associated featureCollection 
          doc and insert it's contents into a Transaction/Insert Xml structure -->
				<WebServiceRequest id="wfsTransaction">
					<targetModel>transactionTemplate</targetModel>
					<requestName>wfs:Transaction</requestName>
				</WebServiceRequest>
			</tools>
			<nodeSelectXpath>/wfs:WFS_Capabilities/wfs:FeatureTypeList/wfs:FeatureType</nodeSelectXpath>
		</WfsCapabilities>
	</models>
	<widgets>
		<ZoomIn id="zoomIn">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>mainMap</targetModel>
			<mouseHandler>mainAoi</mouseHandler>
			<class>RadioButton</class>
			<selected>true</selected>
			<enabledSrc>/images/ZoomInEnable.gif</enabledSrc>
			<disabledSrc>/images/ZoomInDisable.gif</disabledSrc>
		</ZoomIn>
		<ZoomOut id="zoomOut">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>mainMap</targetModel>
			<mouseHandler>mainAoi</mouseHandler>
			<class>RadioButton</class>
			<enabledSrc>/images/ZoomOutEnable.gif</enabledSrc>
			<disabledSrc>/images/ZoomOutDisable.gif</disabledSrc>
		</ZoomOut>
		<DragPan id="dragPan">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>mainMap</targetModel>
			<mouseHandler>mainDragPan</mouseHandler>
			<class>RadioButton</class>
			<enabledSrc>/images/PanEnable.gif</enabledSrc>
			<disabledSrc>/images/PanDisable.gif</disabledSrc>
		</DragPan>
		<Reset id="reset">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>mainMap</targetModel>
			<class>Button</class>
			<disabledSrc>/images/ResetExtentDisable.gif</disabledSrc>
		</Reset>
		<EditPoint_1 id="editPoint">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>getFeatureTemplate</targetModel>
			<class>RadioButton</class>
			<enabledSrc>/images/EditPointEnable.gif</enabledSrc>
			<disabledSrc>/images/EditPointDisable.gif</disabledSrc>
			<!-- this xpath selects the coordinates node from a GML Geometry node for points -->
			<featureXpath>/gml:MultiPoint/gml:pointMember/gml:Point/gml:coordinates</featureXpath>
		</EditPoint_1>
		<EditLine_1 id="editLine">
			<buttonBar>mainButtonBar</buttonBar>
			<targetModel>getFeatureTemplate</targetModel>
			<class>RadioButton</class>
			<enabledSrc>/images/EditLineEnable.gif</enabledSrc>
			<disabledSrc>/images/EditLineDisable.gif</disabledSrc>
			<!-- this xpath selects the coordinates node from a GML Geometry node for lines -->
			<featureXpath>/gml:MultiLineString/gml:lineStringMember/gml:LineString/gml:coordinates</featureXpath>
		</EditLine_1>
	</widgets>
	<skinDir>../../lib/skin/default</skinDir>
	<widgetTextUrl>/widgetText.xml</widgetTextUrl>
	<!-- relative to the skin dir -->
	<!-- Url of LOCAL redirection script, required to access external URLs -->
	<proxyUrl>../../proxy</proxyUrl>
	<serializeUrl>../../writeXml</serializeUrl>
</MapbuilderConfig>
